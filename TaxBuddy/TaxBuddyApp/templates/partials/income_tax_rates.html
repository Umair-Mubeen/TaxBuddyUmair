<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    {% load humanize %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Tax Rates – Income Tax Ordinance, 2001</title>
    <link href="{% static 'assets/img/icons/fab2.png' %}" rel="shortcut icon" type="image/x-icon">


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    {% include 'partials/head-css.html' %}

    <style>

        /* Table Style */
        .corporate-table {
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            font-size: 14px;
        }

        .corporate-table tbody tr:hover {
            background: #f1fbf6;
        }

        /* Tax Year Badge Styling */
        .year-badge {
            font-size: 12px;
            padding: 6px 10px;
            border-radius: 50px;
            font-weight: 500;
        }

        /* Rate Styling */
        .rate-cell {
            font-weight: 700;
            font-size: 18px;
        }

        .high-rate {
            color: #dc3545; /* red tone */
        }

        .medium-rate {
            color: #fd7e14; /* orange */
        }

        .low-rate {
            color: #198754; /* green */
        }

        .highlight-rate {
            font-size: 20px;
            color: #198754;
        }

        /* Mobile Optimization */
        @media (max-width: 768px) {

            .corporate-table {
                font-size: 12px;
            }

            .rate-cell {
                font-size: 15px;
            }

            .highlight-rate {
                font-size: 17px;
            }

            .year-badge {
                font-size: 10px;
            }
        }

    </style>
    <style>

        .text-muted{
          font-size:15px;
        }

/* ===== CLEAN SOFT BACKGROUND ===== */
body {
    background: #f4f9f6;
    font-family: 'Inter', sans-serif;
}

/* Section spacing */
.sp1 {
    padding: 60px 0;
}

/* Main Container Card */
.container.sp1 {
    background: #ffffff;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

/* ===== Year Selector ===== */
.form-select {
    border-radius: 12px;
    padding: 12px 15px;
    font-size: 15px;
}

/* ===== Accordion ===== */
.accordion-item {
    border: none;
    border-radius: 16px;
    overflow: hidden;
    background: #ffffff;
    box-shadow: 0 6px 20px rgba(0,0,0,0.05);
    margin-bottom: 18px;
}

.accordion-button {
    font-weight: 600;
    padding: 18px 20px;
    font-size: 15px;
    color: #198754;
}

.accordion-button:not(.collapsed) {
    background: #e9f7ef;
    color: #157347;
}

.accordion-button:focus {
    box-shadow: none;
}

/* ===== Table ===== */
.table {
    background: #ffffff;
    font-size: 14px;
}

.custom-table-head {
    background: #198754;
    color: #fff;
}

.custom-table-head th {
    background: transparent !important;
    color: #fff;
    font-weight: 600;
    font-size: 13px;
}

.table td {
    vertical-align: middle;
}

/* Remove zoom effect (not mobile friendly) */
.table tbody tr:hover {
    background: #f1fbf6;
}

/* ===== Buttons ===== */
.btn {
    border-radius: 10px;
    padding: 10px 18px;
    font-size: 14px;
    font-weight: 500;
}

.btn-warning {
    background: #198754;
    border: none;
    color: #fff;
}

.btn-warning:hover {
    background: #157347;
}

/* ===== Better Button Layout ===== */
.d-flex.gap-2 {
    gap: 10px !important;
}

/* ===== MOBILE OPTIMIZATION ===== */
@media (max-width: 768px) {

    .sp1 {
        padding: 30px 10px;
    }

    .container.sp1 {
        padding: 18px;
        border-radius: 14px;
    }

    .accordion-button {
        font-size: 14px;
        padding: 14px;
    }

    .table {
        font-size: 12px;
    }

    .custom-table-head th {
        font-size: 11px;
    }

    /* Make buttons full width on mobile */
    .d-flex.gap-2 {
        flex-direction: column;
    }

    .btn {
        width: 100%;
    }

    /* Better year selector layout */
    .col-md-4 {
        width: 100%;
    }
}

    </style>
</head>
<body>

{% include 'partials/topbar.html' %}


<div class="container" style="padding-top:100px">

    <div class="mb-5" id="corporate-section">

        <div class="text-center mb-4">
        <h4 class="fw-bold text-success">
            Rates of Tax for Companies
        </h4>

    </div>

    <div class="table-responsive">
        <table class="table table-bordered align-middle text-center corporate-table">

            <thead>

            <tr>
                <th>Type of Company</th>
                <th>
                        <span class="badge year-badge bg-success">
                            Tax Year 2025
                        </span>
                </th>
                <th>
                        <span class="badge year-badge bg-primary">
                            Tax Year 2026
                        </span>
                </th>
                <th>
                        <span class="badge year-badge bg-dark">
                            Tax Year 2027+
                        </span>
                </th>
            </tr>
            </thead>

            <tbody>
            <tr>
                <td class="fw-semibold text-start">
                    Banking Company
                </td>
                <td class="rate-cell high-rate">44%</td>
                <td class="rate-cell medium-rate">43%</td>
                <td class="rate-cell low-rate">42%</td>
            </tr>

            <tr>
                <td class="fw-semibold text-start">
                    Small Company
                </td>
                <td colspan="3" class="rate-cell highlight-rate">
                    20%
                </td>
            </tr>

            <tr>
                <td class="fw-semibold text-start">
                    Any Other Company
                </td>
                <td colspan="3" class="rate-cell highlight-rate">
                    29%
                </td>
            </tr>
            </tbody>

        </table>
    </div>

    <div class="text-end mt-3">
        <a href="#"
           class="btn btn-outline-success btn-sm">
            Legal Reference : First Schedule – Part I, Division II – Income Tax Ordinance, 2001

        </a>
    </div>

</div>


<!-- Tax Year Selector -->
<div class="row" style="padding-top:2px; margin-bottom:12px">
    <div class="col-md-4">
        <form method="get" id="yearForm">
            <input type="hidden" name="section" id="activeSection" value="{{ active_section }}">

            <label class="fw-semibold mb-2">Select Tax Year</label>
            <select name="year" class="form-select shadow-sm"
                    onchange="document.getElementById('yearForm').submit();">
                {% for y in years %}
                <option value="{{y}}" {% if y == selected_year %}selected{% endif %}>Tax Year {{ y }}</option>
                {% endfor %}
            </select>
        </form>
    </div>
</div>
<!-- INDIVIDUALS -->
<div class="tab-pane fade show active" id="individuals">
    <div class="accordion" id="taxAccordion">

        <!-- ================= SALARIED ================= -->
        <div class="accordion-item" id="salary-section">
            <h2 class="accordion-header">
                <button class="accordion-button fw-semibold"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseSalary">
                    First Schedule - Part I, Division I – Rates of Tax for Salaried Individuals (Tax Year {{selected_year }})
                </button>
            </h2>

            <div id="collapseSalary"
                 class="accordion-collapse collapse {% if active_section == 'salary' or not active_section %}show{% endif %}">
                <div class="accordion-body">

                    <p class="text-muted">
                        First Schedule - Part I, Division I – Rates of Tax for Salaried Individuals – Income Tax
                        Ordinance, 2001
                    </p>

                    <div class="table-responsive">
                        <table class="table table-bordered align-middle">
                            <thead class="custom-table-head">
                            <tr>
                                <th>Income Range</th>
                                <th>Base Tax</th>
                                <th>Rate %</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for bracket in salary_brackets %}
                            <tr>
                                <td>
                                    {% if bracket.income_max %}
                                    {{ bracket.income_min|intcomma }} – {{ bracket.income_max|intcomma }}
                                    {% else %}
                                    Above {{ bracket.income_min|intcomma }}
                                    {% endif %}
                                </td>
                                <td>{{ bracket.base_tax|intcomma }}</td>
                                <td>{{ bracket.rate_percent|floatformat:0 }}%</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <div class="d-flex gap-2 flex-wrap mt-3">
                        <a href="{% url 'SalaryCalculator' %}" class="btn btn-warning">
                            Calculate Tax
                        </a>
                        <a href="/income-tax-mcqs-pakistan/" class="btn btn-warning">
                            Practice MCQs
                        </a>
                    </div>

                </div>
            </div>
        </div>


        <!-- ================= BUSINESS INDIVIDUAL ================= -->
        <div class="accordion-item" id="business-section">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed fw-semibold"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseBusiness">
                    First Schedule - Part I, Division I – Rates of Tax for Business Individuals (Tax Year {{ selected_year }})
                </button>
            </h2>

            <div id="collapseBusiness"
                 class="accordion-collapse collapse {% if active_section == 'business' %}show{% endif %}">
                <div class="accordion-body">

                    <p class="text-muted">
                        First Schedule - Part I, Division I – Rates of Tax for Business Individuals – Income Tax
                        Ordinance, 2001

                    </p>

                    <div class="table-responsive">
                        <table class="table table-bordered align-middle">
                            <thead class="custom-table-head">
                            <tr>
                                <th>Income Range</th>
                                <th>Base Tax</th>
                                <th>Rate %</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for bracket in business_brackets %}
                            <tr>
                                <td>
                                    {% if bracket.income_max %}
                                    {{ bracket.income_min|intcomma }} – {{ bracket.income_max|intcomma }}
                                    {% else %}
                                    Above {{ bracket.income_min|intcomma }}
                                    {% endif %}
                                </td>
                                <td>{{ bracket.base_tax|intcomma }}</td>
                                <td>{{ bracket.rate_percent|floatformat:0 }}%</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <div class="d-flex gap-2 flex-wrap mt-3">
                        <a href="{% url 'BusinessCalculator' %}" class="btn btn-warning">
                            Calculate Tax
                        </a>
                        <a href="/income-tax-mcqs-pakistan/" class="btn btn-warning">
                            Practice MCQs
                        </a>
                    </div>

                </div>
            </div>
        </div>


        <!-- ================= AOP ================= -->
        <div class="accordion-item" id="aop-section">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed fw-semibold"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseAOP">
                    First Schedule - Part I, Division I – Rates of Tax for AOP (Association of Persons) (Tax Year {{ selected_year }})
                </button>
            </h2>

            <div id="collapseAOP"
                 class="accordion-collapse collapse {% if active_section == 'aop' %}show{% endif %}">

                <div class="accordion-body">

                    <p class="text-muted">
                        First Schedule - Part I, Division I – Rates of Tax for AOP – Income Tax Ordinance, 2001

                    </p>

                    <div class="table-responsive">
                        <table class="table table-bordered align-middle">
                            <thead class="custom-table-head">
                            <tr>
                                <th>Income Range</th>
                                <th>Base Tax</th>
                                <th>Rate %</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for bracket in aop_brackets %}
                            <tr>
                                <td>
                                    {% if bracket.income_max %}
                                    {{ bracket.income_min|intcomma }} – {{ bracket.income_max|intcomma }}
                                    {% else %}
                                    Above {{ bracket.income_min|intcomma }}
                                    {% endif %}
                                </td>
                                <td>{{ bracket.base_tax|intcomma }}</td>
                                <td>{{ bracket.rate_percent|floatformat:0 }}%</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <div class="d-flex gap-2 flex-wrap mt-3">
                        <a href="{% url 'AOPCalculator' %}" class="btn btn-warning">
                            Calculate Tax
                        </a>
                        <a href="/income-tax-mcqs-pakistan/" class="btn btn-warning">
                            Practice MCQs
                        </a>
                    </div>

                </div>
            </div>
        </div>

    </div>
</div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% include 'partials/footer.html' %}
{% include 'partials/up.html' %}
{% include 'partials/footer-scripts.html' %}
<script>
    document.querySelectorAll('.accordion-button').forEach(button => {
        button.addEventListener('click', function () {
            let target = this.getAttribute('data-bs-target');

            if (target === '#collapseSalary') {
                document.getElementById('activeSection').value = 'salary';
            }
            if (target === '#collapseBusiness') {
                document.getElementById('activeSection').value = 'business';
            }
            if (target === '#collapseAOP') {
                document.getElementById('activeSection').value = 'aop';
            }
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {

        // Save active section when user clicks accordion
        document.querySelectorAll('.accordion-button').forEach(button => {
            button.addEventListener('click', function () {
                let target = this.getAttribute('data-bs-target');

                if (target === '#collapseSalary') {
                    document.getElementById('activeSection').value = 'salary';
                }
                if (target === '#collapseBusiness') {
                    document.getElementById('activeSection').value = 'business';
                }
                if (target === '#collapseAOP') {
                    document.getElementById('activeSection').value = 'aop';
                }
            });
        });

        // Auto scroll to active section after reload
        let activeSection = "{{ active_section }}";

        if (activeSection === "salary") {
            document.getElementById("salary-section").scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }

        if (activeSection === "business") {
            document.getElementById("business-section").scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }

        if (activeSection === "aop") {
            document.getElementById("aop-section").scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }

        if (activeSection === "corporate") {
            document.getElementById("corporate-section").scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }


    });
    window.scrollTo({
        top: document.getElementById("business-section").offsetTop - 100,
        behavior: "smooth"
    });
</script>
</body>
</html>